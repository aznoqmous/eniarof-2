[gd_scene load_steps=25 format=3 uid="uid://cmlhp3bgeip3e"]

[ext_resource type="Script" uid="uid://dlsptbxcmtms2" path="res://scripts/main.gd" id="1_h2yge"]
[ext_resource type="Texture2D" uid="uid://cfypland4tfa0" path="res://icon.svg" id="1_ig7tw"]
[ext_resource type="PackedScene" uid="uid://d2jcxmqkru15e" path="res://scenes/player.tscn" id="2_h2yge"]
[ext_resource type="Texture2D" uid="uid://qp556mhmny4v" path="res://assets/sprites/clairière_tileable.jpg" id="2_kek77"]
[ext_resource type="Script" uid="uid://dd3c68xr0c4da" path="res://scripts/foliage.gd" id="3_5vw27"]
[ext_resource type="Texture2D" uid="uid://b6fmhq68o82ga" path="res://assets/sprites/belier_v3_tileable.jpg" id="3_kek77"]
[ext_resource type="PackedScene" uid="uid://crs04b65vwhy2" path="res://scenes/npc.tscn" id="4_1bvp3"]
[ext_resource type="Script" uid="uid://bsjxs0qm4pghh" path="res://scripts/npc_action_resource.gd" id="5_7mycd"]
[ext_resource type="Resource" uid="uid://cq0skdj7me8wq" path="res://resources/npc_actions/tongue.tres" id="10_4c57u"]
[ext_resource type="Resource" uid="uid://c6jb78bykgjlj" path="res://resources/npc_actions/jump.tres" id="10_efxa6"]
[ext_resource type="Resource" uid="uid://cwdv7j5781076" path="res://resources/npc_actions/charge.tres" id="11_dg77c"]
[ext_resource type="Script" uid="uid://dnlxmm83vk1pd" path="res://scripts/spend_night_canvas_layer.gd" id="12_dg77c"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_efxa6"]
albedo_texture = ExtResource("2_kek77")
rim = 0.1
uv1_scale = Vector3(30, 30, 30)

[sub_resource type="BoxMesh" id="BoxMesh_kek77"]
size = Vector3(100, 100, 100)

[sub_resource type="BoxShape3D" id="BoxShape3D_4c57u"]
size = Vector3(100, 100, 100)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_w48qg"]
albedo_texture = ExtResource("3_kek77")
uv1_scale = Vector3(30, 30, 30)

[sub_resource type="BoxMesh" id="BoxMesh_efxa6"]
size = Vector3(100, 1, 100)

[sub_resource type="BoxShape3D" id="BoxShape3D_dg77c"]
size = Vector3(100, 1, 100)

[sub_resource type="BoxShape3D" id="BoxShape3D_5vw27"]
size = Vector3(1, 12, 1)

[sub_resource type="Environment" id="Environment_1bvp3"]

[sub_resource type="BoxShape3D" id="BoxShape3D_272bh"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_vivmo"]
albedo_texture = ExtResource("2_kek77")
detail_enabled = true

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_5vw27"]
albedo_color = Color(1, 0, 0, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_dg77c"]
content_margin_left = 0.0
content_margin_top = 0.0
content_margin_right = 0.0
content_margin_bottom = 0.0
bg_color = Color(0.101960786, 0.101960786, 0.101960786, 1)
corner_radius_top_left = 3
corner_radius_top_right = 3
corner_radius_bottom_right = 3
corner_radius_bottom_left = 3
corner_detail = 5

[node name="Main" type="Node3D"]
script = ExtResource("1_h2yge")

[node name="FmodBankLoader" type="FmodBankLoader" parent="."]
bank_paths = ["res://assets/soundbanks/Desktop/Master.strings.bank", "res://assets/soundbanks/Desktop/Master.bank"]

[node name="Level" type="Node3D" parent="."]

[node name="FloorClairière" type="StaticBody3D" parent="Level"]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, 51.7905, -48.531017, 0)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Level/FloorClairière"]
material_override = SubResource("StandardMaterial3D_efxa6")
mesh = SubResource("BoxMesh_kek77")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Level/FloorClairière"]
shape = SubResource("BoxShape3D_4c57u")

[node name="FloorTest" type="StaticBody3D" parent="Level"]
transform = Transform3D(-0.105, 0, -1.9629454e-08, 0, 0.275, 0, 1.5854559e-08, 0, -0.13, -21.987953, -13.186258, -6.9731064)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Level/FloorTest"]
material_override = SubResource("StandardMaterial3D_efxa6")
mesh = SubResource("BoxMesh_kek77")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Level/FloorTest"]
shape = SubResource("BoxShape3D_4c57u")

[node name="FloorBélier" type="StaticBody3D" parent="Level"]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, 0, -2.768567, 0)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Level/FloorBélier"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.07971573, 0, -0.0020866464)
material_override = SubResource("StandardMaterial3D_w48qg")
mesh = SubResource("BoxMesh_efxa6")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Level/FloorBélier"]
shape = SubResource("BoxShape3D_dg77c")

[node name="Foliage" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.198501, -2.268567, 0)
collision_layer = 8
collision_mask = 0
script = ExtResource("3_5vw27")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Foliage"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 6, 0)
shape = SubResource("BoxShape3D_5vw27")

[node name="Sprite3D" type="Sprite3D" parent="Foliage"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)
texture = ExtResource("1_ig7tw")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_1bvp3")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="WorldEnvironment"]
transform = Transform3D(0.113880076, -0.15570024, 0.981218, -0.09190931, 0.9817567, 0.16645277, -0.98923403, -0.109138735, 0.09749221, 3.122682, 2.3306007, 2.4698005)

[node name="Player" parent="." instance=ExtResource("2_h2yge")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -24.056534, 1.201756, -4.4315796)

[node name="NPC" parent="." instance=ExtResource("4_1bvp3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -20.689857, 0.8256235, -5.783312)
actions = Array[ExtResource("5_7mycd")]([ExtResource("10_efxa6"), ExtResource("10_4c57u"), ExtResource("11_dg77c")])
MAX_TONGUE_DISTANCE = 5
JUMP_MODIFIER = 0.5

[node name="RigidBody3D" type="RigidBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.9621398, -2.2569203, 4.123581)
collision_layer = 4
collision_mask = 7

[node name="CollisionShape3D" type="CollisionShape3D" parent="RigidBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.4883533, 0)
shape = SubResource("BoxShape3D_272bh")

[node name="CSGBox3D" type="CSGBox3D" parent="RigidBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.4883533, 0)
material_override = SubResource("StandardMaterial3D_vivmo")
material = SubResource("StandardMaterial3D_5vw27")

[node name="SpendNightCanvasLayer" type="CanvasLayer" parent="."]
script = ExtResource("12_dg77c")

[node name="Control" type="Control" parent="SpendNightCanvasLayer"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="SpendNightButton" type="Button" parent="SpendNightCanvasLayer/Control"]
visible = false
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -54.0
offset_top = -65.0
offset_right = 54.0
offset_bottom = -34.0
grow_horizontal = 2
grow_vertical = 0
text = "GO TO SLEEP"

[node name="NightOverlayControl" type="Control" parent="SpendNightCanvasLayer"]
visible = false
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Panel" type="Panel" parent="SpendNightCanvasLayer/NightOverlayControl"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_styles/panel = SubResource("StyleBoxFlat_dg77c")

[node name="Label" type="Label" parent="SpendNightCanvasLayer/NightOverlayControl"]
layout_mode = 1
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -21.5
offset_top = 41.0
offset_right = 21.5
offset_bottom = 64.0
grow_horizontal = 2
text = "Day 2"

[node name="NightConfirmButton" type="Button" parent="SpendNightCanvasLayer/NightOverlayControl"]
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -36.0
offset_top = -63.0
offset_right = 36.0
offset_bottom = -32.0
grow_horizontal = 2
grow_vertical = 0
text = "Ok bruh"
